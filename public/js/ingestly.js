!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var a,i=function(e,t){var n=new XMLHttpRequest;return"function"==typeof t&&(n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e;try{e=JSON.parse(n.response)}catch(e){return e}t.call(null,e)}}),n.open("GET",e,!0),n.timeout=4e3,n.withCredentials=!0,n.send(),!0},c=function(e,t,n,o){var r=(+new Date).toString(36),i="https://".concat(a.endpoint,"/").concat(e,"/").concat(r,"/");for(var c in i+="?key=".concat(a.apiKey),i+="&sdk=JS-".concat(a.sdkVersion),i+="&ingestlyId=".concat(n),i+="&rootId=".concat(o),t)i+=d(c,t[c]);return i},d=function(e,t){return"object"===r(t)&&(t=JSON.stringify(t)),void 0!==t&&""!==t&&"{}"!==t?"&".concat(e,"=").concat(encodeURIComponent(t)):""},l=!0,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=t}var t,n,r;return t=e,(n=[{key:"emit",value:function(e){var t=c("ingestly-ingest",e,a.deviceId,a.rootId);if("sendBeacon"in navigator&&"function"==typeof navigator.sendBeacon&&!0===l){try{l=navigator.sendBeacon(t)}catch(e){l=!1}if(!l)if("function"==typeof window[a.target].fetch&&"function"==typeof window[a.target].AbortController){var n=new AbortController,o={signal:n.signal,method:"POST",cache:"no-store",keepalive:!0};setTimeout((function(){return n.abort()}),4e3),window[a.target].fetch(t,o)}else i(t)}else i(t)}},{key:"sync",value:function(e,t){var n=c("ingestly-sync",e,a.deviceId,a.rootId);if("function"==typeof window[a.target].fetch&&"function"==typeof window[a.target].AbortController){var o=new AbortController,r={signal:o.signal,method:"GET",cache:"no-store",keepalive:!0};setTimeout((function(){return o.abort()}),4e3),window[a.target].fetch(n,r).then((function(e){return e.json()})).then((function(e){t.call(null,e.id)}))}else i(n,(function(e){t.call(null,e.id)}))}}])&&o(t.prototype,n),r&&o(t,r),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var f={},m=0,p=function(){function e(t){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{n=new CustomEvent(t.eventName)}catch(e){(n=window.parent.document.createEvent("CustomEvent")).initCustomEvent(t.eventName,!1,!1,{})}window.parent.requestAnimationFrame=window.parent.requestAnimationFrame||window.parent.mozRequestAnimationFrame||window.parent.webkitRequestAnimationFrame,function e(){if(window.parent.requestAnimationFrame(e),o)return!1;o=setTimeout((function(){window.parent.dispatchEvent(n),o=null}),t.eventFrequency)}()}var t,n,o;return t=e,(n=[{key:"addListener",value:function(e,t,n,o){return e.addEventListener(t,n,o),f[m]={element:e,type:t,listener:n,capture:o},m++}},{key:"removeListener",value:function(e){if(e in f){var t=f[e];t.element.removeEventListener(t.type,t.listener,t.capture)}}}])&&u(t.prototype,n),o&&u(t,o),e}();function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v,h,y=function(){for(var e=(+new Date).toString(36),t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",o=0;o<32;o++)n+=t[Math.floor(Math.random()*t.length)];return"".concat(e,"-").concat(n)},w=function(){var e,t,n,o=(e=v,t=window.parent.document.cookie||"",("; ".concat(t,";").match("; ".concat(e,"=([^Â¥S;]*)"))||[])[1]||""),r=localStorage.getItem(v)||"";return o.length>8?n=o:r.length>8?n=r:(n=h,b=!0),n},b=!1,k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h=y(),v="".concat(t.prefix,"-id"),this.deviceId=w(),this.rootId=h,this.isNewId=b}var t,n,o;return t=e,(n=[{key:"setDeviceId",value:function(e){this.deviceId=e;try{localStorage.setItem(v,e)}catch(t){window.parent.document.cookie="".concat(v,"=").concat(e,"; Path=/; Max-Age=31536000; SameSite=Lax")}}}])&&g(t.prototype,n),o&&g(t,o),e}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getPerformanceInfo",value:function(e){if("navigation"in window[e].performance&&"timing"in window[e].performance){var t=window[e].performance.timing,n=window[e].performance.navigation,o=t.domInteractive-t.domLoading,r=t.domContentLoadedEventStart-t.domLoading,a=t.domComplete-t.domLoading,i=+new Date-t.domLoading;return{ptTti:o>=0?o:void 0,ptDcl:r>=0?r:void 0,ptComplete:a>=0?a:void 0,ptElapsedMs:i>=0?i:void 0,nvType:n.type,nvRdCnt:n.redirectCount}}return{}}},{key:"getClientInfo",value:function(e){var t,n,o=navigator.userAgent,r=screen.orientation||screen.mozOrientation||screen.msOrientation||"not-supported";return"object"===S(r)&&(r=r.type),o.match(/iPhone|iPod/g)?(n="iOS",t="Mobile"):o.match(/iPad/g)?(n="iOS",t="Tablet"):o.match(/Android/g)?o.match(/Windows Phone/g)?(n="Windows Phone",t="Mobile"):(n="Android",t=o.match(/Mobile/g)?"Mobile":"Tablet"):o.match(/Windows/g)?(n="Windows",t="Desktop"):o.match(/Mac OS X/g)?(n="Mac OS X",t="Desktop"):o.match(/Linux/g)?(n="Linux",t="Desktop"):o.match(/CrOS/g)?(n="Chrome OS",t="Desktop"):o.match(/Nintendo|PlayStation|Xbox/g)?(n="Other",t="Game"):(n="Other",t="Unknown"),{vpHeight:window[e].innerHeight,vpWidth:window[e].innerWidth,scHeight:window[e].screen.height,scWidth:window[e].screen.width,scOrientation:r,dvType:t,dvOs:n,dvPlatform:navigator.platform}}},{key:"getMediaInfo",value:function(e){return!!e&&{mdSrc:e.src,mdCurrentTime:Math.round(10*e.currentTime)/10,mdDuration:Math.round(10*e.duration)/10,mdPlayedPercent:Math.round(e.currentTime/e.duration*1e3)/10,mdAttr:{type:e.type||void 0,width:e.clientWidth||void 0,height:e.clientHeight||void 0,muted:e.muted||!1,defaultMuted:e.defaultMuted||!1,autoplay:e.autoplay||!1,playerId:e.playerId||void 0,dataset:e.dataset}}}},{key:"getFormStats",value:function(e,t,n,o){var r=n.name||n.id||"-",a=0;if("select"===n.tagName.toLowerCase())for(var i=0;i<n.length;i++)n[i].selected&&a++;else a="input"!==n.tagName.toLowerCase()||"checkbox"!==n.type&&"radio"!==n.type?n.value.length:n.checked?1:0;return"hidden"!==n.type&&(e.fmItems[r]={status:t,length:a}),e.fmFirstItem||(e.fmFirstItem=n.name||n.id||"-",e.fmStartedSinceInitMs=+new Date-o),e.fmLastItem=n.name||n.id||"-",e.fmEndedSinceInitMs=+new Date-o,e.fmDurationMs=e.fmEndedSinceInitMs-e.fmStartedSinceInitMs,e}},{key:"getVisibility",value:function(e,t){var n=0,o={};try{o=e.getBoundingClientRect(),n=e.innerText.length}catch(e){o={}}var r=window[t].innerHeight,a=window[t].document.documentElement.scrollHeight,i=window[t].document.visibilityState||"unknown",c="pageYOffset"in window[t]?window[t].pageYOffset:(window[t].document.documentElement||window[t].document.body.parentNode||window[t].document.body).scrollTop,d=c+r,l=o.height,s=o.top<=0?0:o.top,u=-1*(o.bottom-r)<=0?0:-1*(o.bottom-r),f=d,m=d/a,p=null,g=null,v=!1;return o.top>=0&&o.bottom>r&&o.top>=r?(p=null,g=null,v=!1):o.top>=0&&o.bottom>r&&o.top<r?(p=0,g=r-o.top,v=!0):o.top<0&&o.bottom>r?(g=(p=-1*o.top)+r,v=!0):o.top>=0&&o.bottom<=r?(p=0,g=l,v=!0):o.top<0&&o.bottom>=0&&o.bottom<=r?(p=l+o.top,g=l,v=!0):o.top<0&&o.bottom<0?(p=null,g=null,v=!1):v=!1,{dHeight:a,dIsVisible:i,dVisibleTop:c,dVisibleBottom:d,dScrollUntil:f,dScrollRate:m,tHeight:l,tVisibleTop:p,tVisibleBottom:g,tMarginTop:s,tMarginBottom:u,tScrollUntil:g,tScrollRate:g/l,tViewableRate:(g-p)/l,tIsInView:v,tLength:n}}},{key:"queryMatch",value:function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data-trackable",r="button",a=[];for(3===t.nodeType&&(t=t.parentNode);t&&t!==window.parent.document;){var i=(t.matches||t.msMatchesSelector||function(){return!1}).bind(t);t.hasAttribute(o)&&a.unshift(t.getAttribute(o)),!n&&i(e)&&(r="a"===t.tagName.toLowerCase()?"link":t.tagName.toLowerCase(),n=t),t=t.parentNode}return!!(n&&a.length>0)&&{element:n,category:r,path:a.join(">")}}},{key:"mergeObj",value:function(e){for(var t={},n=0;n<e.length;n++)for(var o in e[n])"object"!==S(e[n][o])||null===e[n][o]||Array.isArray(e[n][o])?Array.isArray(e[n][o])?t[o]=t[o]?t[o].concat(e[n][o]):e[n][o]:t[o]=e[n][o]:t[o]=t[o]?this.mergeObj([t[o],e[n][o]]):e[n][o];return t}},{key:"parseUrl",value:function(e){var t,n={},o=document.createElement("a");return e&&(o.href=e,t=o.search.slice(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}),n={Protocol:o.protocol,Host:o.hostname,Port:o.port,Path:o.pathname,Search:o.search,Hash:o.hash,Query:t}),n}}])&&T(t.prototype,n),o&&T(t,o),e}();function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var L,A,C,O,P,N,R,F,x,E=+new Date,j={media:[],form:[]},D=+new Date,V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataModel={},this.trackReadTargets=[],this.trackFormTargets=[]}var t,n,o;return t=e,(n=[{key:"config",value:function(e){L=e,N=new I,C=new k({prefix:L.prefix,target:L.targetWindow}),O=new s({endpoint:L.endpoint,apiKey:L.apiKey,sdkVersion:"0.6.1",deviceId:C.deviceId,rootId:C.rootId,target:L.targetWindow}),A=L.targetWindow,R=N.parseUrl(window[A].document.location.href),F=N.parseUrl(window[A].document.referrer),x="onbeforeunload"in window[A]?"beforeunload":"onpagehide"in window[A]?"pagehide":"unload"}},{key:"init",value:function(e){for(var t in this.dataModel=e,R)this.dataModel["ur".concat(t)]=R[t];for(var n in F)this.dataModel["rf".concat(n)]=F[n];L.eventName&&L.eventFrequency&&void 0===P&&(P=new p({eventName:L.eventName,eventFrequency:L.eventFrequency})),L.options&&L.options.rum&&L.options.rum.enable&&("interactive"===window[A].document.readyState||"complete"===window[A].document.readyState?this.trackAction("rum","page",{}):this.trackPerformance(A)),L.options&&L.options.unload&&L.options.unload.enable&&this.trackUnload(A),L.options&&L.options.scroll&&L.options.scroll.enable&&this.trackScroll(),L.options&&L.options.read&&L.options.read.enable&&(this.trackReadTargets=[].slice.call(L.options.read.targets),this.trackRead()),L.options&&L.options.clicks&&L.options.clicks.enable&&this.trackClicks(),L.options&&L.options.media&&L.options.media.enable&&this.trackMedia(),L.options&&L.options.form&&L.options.form.enable&&(this.trackFormTargets=[].slice.call(L.options.form.targets),this.trackForm())}},{key:"trackAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=+new Date,r={action:e,category:t,sinceInitMs:o-E,sincePrevMs:o-D},a=N.mergeObj([this.dataModel,r,n,N.getClientInfo(A),"performance"in window[A]?N.getPerformanceInfo(A):{}]);D=o,C.isNewId?O.sync(a,(function(e){C.setDeviceId(e),C.isNewId=!1})):(O.emit(a),C.setDeviceId(C.deviceId))}},{key:"trackPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trackAction("view","page",e)}},{key:"trackPerformance",value:function(){var e=this;P.removeListener(j.performance),j.performance=P.addListener(window[A].document,"DOMContentLoaded",(function(){e.trackAction("rum","page",{})}),!1)}},{key:"trackUnload",value:function(){var e=this;P.removeListener(j.unload),j.unload=P.addListener(window[A],x,(function(){e.trackAction("unload","page",{})}),!1)}},{key:"trackClicks",value:function(){var e=this;P.removeListener(j.click),j.click=P.addListener(window[A].document.body,"click",(function(t){var n=L.options.clicks.targetAttr||"data-trackable",o=N.queryMatch('a, button, input, [role="button"]',t.target,n),r=null;o&&(r=o.element,e.trackAction("click",o.category,{clTag:r.tagName,clId:r.id||void 0,clClass:r.className||void 0,clPath:o.path||void 0,clLink:r.href||void 0,clText:r.innerText||r.value||void 0,clAttr:r.dataset||void 0}))}),!1)}},{key:"trackScroll",value:function(){var e=this,t=L.options.scroll.granularity||20,n=100/t,o=1e3*L.options.scroll.threshold||2e3,r={},a=0,i=0,c="percent";P.removeListener(j.scroll),j.scroll=P.addListener(window[A],L.eventName,(function(){"hidden"!==(r=N.getVisibility(null,A)).dIsVisible&&"prerender"!==r.dIsVisible&&("percent"===L.options.scroll.unit?a=Math.floor(r.dScrollRate*n)*t:(a=r.dScrollUntil,c="pixel"),("percent"===c&&a>i&&a>=0&&a<=100||"pixel"===c&&a>i&&a>=t)&&setTimeout((function(){a>i&&(e.trackAction("scroll","page",{pgH:r.dHeight,srDepth:a,srUnit:c}),i="percent"===c?a:a+t)}),o))}),!1)}},{key:"trackRead",value:function(){var e=this;if(this.trackReadTargets&&0!==this.trackReadTargets.length){var t=L.options.read.granularity||20,n=100/t,o=1e3*L.options.read.threshold||2e3,r=[],a=[],i=[];P.removeListener(j.read),j.read=P.addListener(window[A],L.eventName,(function(){for(var c=function(c){a[c]=a[c]||0,i[c]=i[c]||0,r[c]=N.getVisibility(e.trackReadTargets[c],A),"hidden"!==r[c].dIsVisible&&"prerender"!==r[c].dIsVisible&&r[c].tIsInView&&(a[c]=Math.floor(r[c].tScrollRate*n)*t,a[c]>i[c]&&a[c]>=0&&a[c]<=100&&setTimeout((function(){a[c]>i[c]&&e.trackReadTargets[c]&&(e.trackAction("read","content",{rdIdx:c,rdId:e.trackReadTargets[c].id||void 0,rdTxS:e.trackReadTargets[c].innerText.substring(0,12)||void 0,rdTgH:r[c].tHeight,rdTxL:r[c].tLength,rdRate:a[c],rdAttr:e.trackReadTargets[c].dataset||void 0}),100===a[c]&&e.trackReadTargets.splice(c,1),i[c]=a[c])}),o))},d=0;d<e.trackReadTargets.length;d++)c(d)}),!1)}}},{key:"trackMedia",value:function(){for(var e=this,t=["play","pause","ended"],n=L.options.media.heartbeat||5,o={},r=0;r<t.length;r++)P.removeListener(j.media[t[r]]),j.media[t[r]]=P.addListener(window[A].document.body,t[r],(function(t){e.trackAction(t.type,t.target.tagName.toLowerCase(),N.getMediaInfo(t.target))}),{capture:!0});P.removeListener(j.media.timeupdate),j.media.timeupdate=P.addListener(window[A].document,"timeupdate",(function(t){if(o[t.target.src])return!1;o[t.target.src]=setTimeout((function(){!0!==t.target.paused&&!0!==t.target.ended&&e.trackAction(t.type,t.target.tagName.toLowerCase(),N.getMediaInfo(t.target)),o[t.target.src]=!1}),1e3*n)}),{capture:!0})}},{key:"trackForm",value:function(){var e=this;if(this.trackFormTargets&&0!==this.trackFormTargets.length)for(var t=["focus","change"],n=function(n){for(var o={fmName:e.trackFormTargets[n].name||e.trackFormTargets[n].id||"-",fmAttr:e.trackFormTargets[n].dataset,fmItems:{}},r=function(r){P.removeListener(j.form[t[r]]),j.form[t[r]]=P.addListener(e.trackFormTargets[n],t[r],(function(e){o=N.getFormStats(o,t[r],e.target,E)}),!0)},a=0;a<t.length;a++)r(a);P.removeListener(j.form_emit),j.form_emit=P.addListener(window[A],x,(function(){e.trackAction("stats","form",o)}),!1)},o=0;o<this.trackFormTargets.length;o++)n(o)}},{key:"getQueryVal",value:function(e){return R.Query[e]?R.Query[e]:""}}])&&M(t.prototype,n),o&&M(t,o),e}();window.Ingestly=new V}]);